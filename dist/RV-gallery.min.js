class Gallery{constructor(a){Object.assign(this,{nav:["<span> < </span>","<span> > </span>"],close:"<span>X</span>",showNav:!0,showNavIfOneItem:!1,aspectRatio:"auto",showDots:!1,showDotsIfOneItem:!1,arrows:!1,fullScreen:!0,loop:!0,autoplay:!1,autoplayDelay:2e3,transition:"fade",transitionTime:500},a),this.itemCount=this.gallery.find("img").length,this.agi=0;let b=this;if(this.renderGallery(),jQuery(window).on("load",function(){b.countMoveRight(),b.calcGalleryHeight()}),jQuery(window).on("resize",function(){b.countMoveRight(),b.setLeftSmallImages(),b.calcGalleryHeight()}),jQuery(this.gallery).on("change",function(d,f){b.changeImg(f)}),jQuery(this.gallery).on("click",".g_s-img img",function(d){b.changeImg(d)}),jQuery(this.gallery).on("click",".prev",function(){b.changeImg("prev")}),jQuery(this.gallery).on("click",".next",function(){b.changeImg("next")}),this.fullScreen&&(jQuery(this.gallery).on("click",".g_img-cont",function(){b.showFullScreen()}),jQuery(this.gallery).on("click",".g_f-s-image",function(){b.closeFullScreen()})),jQuery(this.gallery).on("click",".dot",function(d){d.stopPropagation(),b.changeImg(parseInt(jQuery(this).attr("data-item")))}),jQuery(this.gallery).on("click",".big-arrows > *:first-child",function(d){d.stopPropagation(),b.changeImg("prev")}),jQuery(this.gallery).on("click",".big-arrows > *:last-child",function(d){d.stopPropagation(),b.changeImg("next")}),this.xDown=null,this.yDown=null,this.gallery.on("touchstart",function(d){b.xDown=d.originalEvent.touches[0].clientX,b.yDown=d.originalEvent.touches[0].clientY}),this.gallery.on("touchmove",function(d){b.handleTouchMove(d)}),this.autoplay){var c=setInterval(function(){b.changeImg("next")},b.autoplayDelay);this.gallery.on("mouseenter",function(){clearInterval(c)}),this.gallery.on("mouseleave",function(){c=setInterval(function(){b.changeImg("next")},b.autoplayDelay)})}}calcGalleryHeight(){var a=this.gallery.find(".g_img-cont").width();"auto"!=this.aspectRatio&&jQuery.isNumeric(this.aspectRatio)&&this.gallery.find(".g_img-cont").css("height",a/this.aspectRatio)}countMoveRight(){if(1<this.itemCount){this.g_navDivWidth=this.gallery.find(".g_nav")[0].clientWidth,this.fullSmallWidth=0,this.item=0;for(var a=0;a<this.itemCount;a++)this.item=this.gallery.find(".g_s-img").get(a).clientWidth,this.fullSmallWidth+=this.item+parseInt(this.gallery.find(".g_s-img").css("marginRight"))+parseInt(this.gallery.find(".g_s-img").css("marginLeft"));this.moveRight=(this.fullSmallWidth-this.g_navDivWidth)/(this.gallery.find(".g_s-img").length-1)}}setLeftSmallImages(){this.gallery.find(".g_s-img").css("left","-"+this.agi*this.moveRight+"px")}loadActiveImg(a){let b=this;b.bigImageSrc=b.gallery.find(".g_s-img img").eq(b.agi).attr("src"),this.gallery.find(".agi").removeClass("agi"),a&&a(b),b.gallery.find(".g_s-img").eq(b.agi).addClass("agi"),"fade"==this.transition?("#"!==b.gallery.find(".g_m-img").attr("src")&&(b.gallery.find(".g_img-cont .g_m-img").clone().appendTo(b.gallery.find(".g_img-cont .g_m-img").parent()).css({position:"absolute",height:"100%",width:"100%"}).addClass("cloned"),b.gallery.find(".g_f-s .g_m-img").clone().appendTo(b.gallery.find(".g_f-s .g_m-img").parent()).css({position:"absolute"}).addClass("cloned")),b.gallery.find(".g_m-img").not(".cloned").attr("src",b.bigImageSrc).hide().fadeIn(b.transitionTime/2),b.gallery.find(".g_m-img.cloned").fadeOut(b.transitionTime,function(){jQuery(this.remove())})):"slide"==this.transition?b.slideDirection?(b.gallery.find(".g_img-cont .g_m-img").clone().appendTo(b.gallery.find(".g_img-cont .g_m-img").parent()).css({position:"absolute",height:"100%",width:"100%"}).addClass("cloned"),b.gallery.find(".g_f-s .g_m-img").clone().appendTo(b.gallery.find(".g_f-s .g_m-img").parent()).css({position:"absolute"}).addClass("cloned"),"left"===this.slideDirection?(b.gallery.find(".g_m-img").not(".cloned").css({left:"100%"}).attr("src",b.bigImageSrc),b.gallery.find(".g_m-img").not(".cloned").animate({left:"0"},b.transitionTime),b.gallery.find(".g_m-img.cloned").animate({left:"-100%"},b.transitionTime,function(){jQuery(this).remove()})):(b.gallery.find(".g_m-img").not(".cloned").css({left:"-100%"}).attr("src",b.bigImageSrc),b.gallery.find(".g_m-img").not(".cloned").css({left:"-100%"}).attr("src",b.bigImageSrc),b.gallery.find(".g_m-img").not(".cloned").animate({left:"0"},b.transitionTime),b.gallery.find(".g_m-img.cloned").animate({left:"100%"},b.transitionTime,function(){jQuery(this).remove()}))):b.gallery.find(".g_m-img").not(".cloned").attr("src",b.bigImageSrc):b.gallery.find(".g_m-img").not(".cloned").attr("src",b.bigImageSrc),b.gallery.find(".dot").removeClass("dot-active"),b.gallery.find(".dot[data-item='"+b.agi+"']").addClass("dot-active")}changeImg(a){this.changed=!1,1<this.itemCount&&("prev"===a?(0<this.agi?(this.agi--,this.changed=!0):0===this.agi&&this.loop&&(this.agi=this.gallery.find(".g_s-img").length-1),"slide"===this.transition&&(this.slideDirection="left")):"next"===a?(this.agi<this.gallery.find(".g_s-img").length-1?(this.agi++,this.changed=!0):this.agi===this.gallery.find(".g_s-img").length-1&&this.loop&&(this.agi=0),"slide"===this.transition&&(this.slideDirection="right")):"number"==typeof a?0<=a&&a<this.itemCount&&(this.slideDirection=a>this.agi&&"slide"===this.transition?"right":"left",this.changed=!0,this.agi=a):(this.images=jQuery.map(this.gallery.find(".g_s-img img"),function(b){return b.src}),this.imgsrc=jQuery(a.target)[0].src,this.changed=!0,this.slideDirection=this.images.indexOf(this.imgsrc)>this.agi&&"slide"===this.transition?"right":"left",this.agi=this.images.indexOf(this.imgsrc)),(this.changed||this.loop)&&(this.loadActiveImg(),this.setLeftSmallImages()))}showFullScreen(){this.gallery.css("z-index","99999"),this.gallery.find(".g_f-s-hidden").fadeIn(400)}closeFullScreen(){this.gallery.find(".g_f-s-hidden").fadeOut(400,function(){this.gallery.removeAttr("style")}.bind(this))}renderGallery(){if(this.gallery.find("img").wrap("<div class=\"g_s-img\"></div>"),this.gallery.find(".g_s-img").wrapAll("<div class=\"g_nav\" />"),this.gallery.children().wrapAll("<div class=\"g_nav-cont\" />"),jQuery(`<div class="arrow-div prev">`+this.nav[0]+`</div>`).prependTo(this.gallery.find(".g_nav-cont")),this.showNav||this.gallery.find(".g_nav-cont").hide(),jQuery(`<div class="arrow-div next">`+this.nav[1]+`</div>`).appendTo(this.gallery.find(".g_nav-cont")),jQuery(`<div class="g_img-cont"><div class="g_b-img"><img class="g_m-img" src="#"></div></div>`).appendTo(this.gallery),this.arrows&&1<this.itemCount&&jQuery(`<div class="big-arrows"><div>`+this.nav[0]+`</div><div>`+this.nav[1]+`</div></div>`).appendTo(this.gallery.find(".g_img-cont")),this.showDots&&1<this.itemCount||this.showDotsIfOneItem){jQuery(`<div class="dots"></div>`).appendTo(this.gallery.find(".g_img-cont"));for(let a=0;a<this.itemCount;a++)jQuery(`<div class="dot" data-item="`+a+`"></div>`).appendTo(this.gallery.find(".dots"))}this.gallery.children().wrapAll("<div class=\"gallery-row\" />"),this.fullScreen?jQuery(`<div class="g_f-s-hidden"><div class="g_f-s"><div class="g_f-s-arrow g_f-s-arrow-left prev">`+this.nav[0]+`</div><div class="g_f-s-image"><img class="g_m-img" src="#"><div class="close-button">`+this.close+`</div></div><div class="g_f-s-arrow g_f-s-arrow-right next">`+this.nav[1]+`</div></div></div>`).appendTo(this.gallery):this.gallery.find(".g_img-cont").css("cursor","auto"),this.loadActiveImg(function(a){2>a.itemCount&&!a.showNavIfOneItem&&a.gallery.find(".g_nav-cont, .g_f-s-arrow").remove()})}handleTouchMove(a){if(this.xDown&&this.yDown){var b=a.originalEvent.touches[0].clientX,c=a.originalEvent.touches[0].clientY;this.xDiff=this.xDown-b,this.yDiff=this.yDown-c,Math.abs(this.xDiff)>Math.abs(this.yDiff)&&(0<this.xDiff?this.changeImg("prev"):this.changeImg("next")),this.xDown=null,this.yDown=null}}}jQuery.fn.initGallery=function(a){a||(a={});var b=[];for(let c=0;c<this.length;c++)a.gallery=this.eq(c),b[c]=new Gallery(a)};